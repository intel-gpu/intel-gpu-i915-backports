
#  Intel® Graphics Driver Backports for Linux® OS (intel-gpu-i915-backports)

This branch provides i915 driver source code backported for Ubuntu® to enable intel discrete GPUs support.

We are using [backport project](https://backports.wiki.kernel.org/index.php/Main_Page) to generate out of tree i915 kernel module source codes.

This repo is a code snapshot of particular version of backports and does not contain individual git change history.

# Branches
 ubuntu/main will point to the currently supported version of Ubuntu®.
 
 We will add a new branch ubuntu/ubuntu<x.y> whenever a version is deprecated or moved to the maintenance phase.
  
# Supported Version/kernel
  Our current backport supports the following ubuntu version.
| Ubuntu Version |kernel version    |
|---  |---  |
| Ubuntu® 22.04 | linux-oem kernel 5.17 |
| Ubuntu® 20.04 | linux-oem kernel 5.14 |
  
  We are using the header of the latest available kernel at the time of backporting. However, it may not be compatible with the latest version at the installation time.
  Please refer [Version](https://github.com/intel-gpu/intel-gpu-i915-backports/blob/ubuntu/main/versions)
  file to check the BASE_KERNEL_NAME_20.04 and BASE_KERNEL_NAME_22.04. It will point to the kernel version which is being used during backporting.

  In case of an issue with the latest kernel, please install the kernel version mentioned in version file for appropriate OS version.
  
    sudo apt install linux-headers-<BASE_KERNEL_NAME_<OS VERSION>>-oem \
    linux-image-unsigned-<BASE_KERNEL_NAME_<OS VERSION>>-oem

    example:
	      sudo apt install linux-headers-5.17.0-1006-oem\
	      linux-image-unsigned-5.17.0-1006-oem
	      sudo reboot


Please note that dkms installation will skip if the kernel header is not installed.

# Prerequisite
we have dependencies on the following packages
  - dkms
  - make
  - debhelper

        sudo apt install dkms make debhelper


# Dependencies

This driver is part of a collection of kernel-mode drivers that enable support for Intel graphics. The backports collection within https://github.com/intel-gpu includes:

- [Intel® Graphics Driver Backports for Linux](https://github.com/intel-gpu/intel-gpu-i915-backports) - The main graphics driver (includes a compatible DRM subsystem and dmabuf if necessary)
- [Intel® Converged Security Engine Backports](https://github.com/intel-gpu/intel-gpu-cse-backports) - Converged Security Engine
- [Intel® Platform Monitoring Technology Backports](https://github.com/intel-gpu/intel-gpu-pmt-backports/) - Intel Platform Telemetry
- [Intel® GPU firmware](https://github.com/intel-gpu/intel-gpu-firmware) - Firmware required by intel GPUs.

Each project is tagged consistently, so when pulling these repos, pull the same tag.


# Dynamic Kernel Module Support(DKMS) based package creation

We need to create i915 dkms package using the below command.

    make i915dkmsdeb-pkg

Above cmd will create debain package in parent folder. **intel-i915-dkms_<**release version**>.<**kernel-version**>.deb**
# Installation

     sudo dpkg -i intel-i915-dkms_*.deb
     # Reboot the device after installation of all packages.
     sudo reboot
  
## Installation varification

Please grep **backport**  from dmesg after reboot. you should see something like below

    > sudo dmesg |grep -i backport
    [    5.963854] COMPAT BACKPORTED INIT
    [    5.968761] Loading modules backported from DII_5811_prerelease
    [    5.976154] Backport generated by backports.git UBUNTU_2204_OEM_5811_PRERELEASE_220601.1
    [    6.069699] [drm] I915 BACKPORTED INIT




